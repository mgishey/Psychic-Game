<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>The Psychic Game</title>
</head>

<body>

    <!--<button onclick="randomString()">Try it</button>-->

    <h1>The Psychic Game</h1>
    <p id="comp-guess">Guess what letter I'm thinking of:</p>

    <p id="wins">Wins: 0</p>

    <p id="losses">Losses: 0</p>

    <p id="guesses-left">Guesses Left: 9</p>

    <p id="guesses-so-far">Your guesses so far:</p>

    <script language="javascript" type="text/javascript">

        //Delare global variables
        var randomLetter;
        var gameIndex = 0;
        var numGames = 9;
        var win = 0;
        var loss = 0;
        var guessStr = "";
        var userInput = "";
        var totalWins = 0;
        var totalLosses = 0;

        //*************************//
        //       FUNCTIONS         //
        //*************************//

        //Function to generate random letters

        function randomString() {

            var chars = "abcdefghiklmnopqrstuvwxyz";

            var rnum = Math.floor((Math.random() * 26) + 1);
            //console.log(rnum);
            randomLetter = chars.substring(rnum, rnum + 1);
            document.getElementById("comp-guess").innerHTML = "Guess what letter I'm thinking of: " + randomLetter;
            console.log(randomLetter);
            console.log("------------" + randomLetter);
            return;
        }

        //Write score to webpage.

        function updateScore(w, l, x, u) {
            console.log("Current guess: " + u);
            var guessesLeft = numGames - gameIndex;


            console.log("Guesses Left: " + guessesLeft);
            if (w == 1) {
                totalWins++;
                document.getElementById("wins").innerHTML = "Wins: " + totalWins;
                win = 0;
                loss = 0;
                guessStr = "";
                userInput = "";
                numGames = 9;
                gameIndex = 0;
                guessesLeft = 0;
            }

            if (l >= 9) {
                totalLosses++;
                document.getElementById("losses").innerHTML = "Losses " + totalLosses;
                loss = 0;
                win = 0;
                guessStr = "";
                userInput = "";
                numGames = 9;
                gameIndex = 0
            }



            if (gameIndex == 1) {
                guessStr = u + ", ";
                console.log("First guess string: " + guessStr);
            } else {
                guessStr = guessStr.concat(u);
                guessStr = guessStr + ", ";
                console.log("Secondplus guess string: " + guessStr);
            }

            if (guessesLeft == 0) {
                guessesLeft = 9;
                guessStr = "";

                document.getElementById("guesses-so-far").innerHTML = "Guesses so far " + guessStr;
                document.getElementById("guesses-left").innerHTML = "Guesses Left: " + guessesLeft;
                guessesLeft == 0;
            } else {
                document.getElementById("guesses-so-far").innerHTML = "Guesses so far " + guessStr;
                document.getElementById("guesses-left").innerHTML = "Guesses Left: " + guessesLeft;
            }

            //console.log("***********************");
            //console.log("Update Score Win: " + w);
            //console.log("Update Score Loss " + l);
            //console.log("Computer Letter " + x);
            //console.log("*****************************");

        }

        //****************************//
        //      Main Process          //
        //****************************//

        randomString();

        //Get input from user

        // When the user presses a key, it will run the following function...

        console.log("What the HELL!");
        document.onkeyup = function (event) {
            console.log("Game Index at start of function(event) " + gameIndex);
            console.log("Wins " + win);
            if (gameIndex == 9) {
                guessStr = "";
                gameIndex = 0;
            }


            // Determine which key was pressed, make it lowercase, and set it to the userInput variable.
            var userInput = event.key.toLowerCase();
            console.log("user-input: " + userInput);
            console.log("random-letter " + randomLetter);

            // If they guess the correct answer, increase and update score, alert them they got it right.

            if (userInput === randomLetter) {
                win++;
                console.log("Wins" + win);
                //document.getElementById("wins").innerHTML = "Wins: " + win;

            } else {
                loss++;
                console.log("Losses" + loss);
            }

            gameIndex++;
            console.log("Game index: " + gameIndex);
            console.log("============================================");
            updateScore(win, loss, randomLetter, userInput);
            randomString();
        }







    </script>









    </script>
</body>